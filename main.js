(()=>{"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===_typeof(i)?i:String(i)),o)}var n,i}var e=function(){function EventEmitter(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(EventEmitter,[{key:"on",value:function on(e,t){var r;this._events.has(e)||this._events.set(e,new Set),null===(r=this._events.get(e))||void 0===r||r.add(t)}},{key:"off",value:function off(e,t){var r;this._events.has(e)&&(this._events.get(e).delete(t),0===(null===(r=this._events.get(e))||void 0===r?void 0:r.size)&&this._events.delete(e))}},{key:"emit",value:function emit(e,t){this._events.forEach((function(r,o){(o instanceof RegExp&&o.test(e)||o===e)&&r.forEach((function(e){return e(t)}))}))}},{key:"onAll",value:function onAll(e){this.on("*",e)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(e,t){var r=this;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(e,Object.assign(Object.assign({},o||{}),t||{}))}}}]),EventEmitter}(),t="".concat("https://larek-api.nomoreparties.co","/api/weblarek"),r="".concat("https://larek-api.nomoreparties.co","/content/weblarek");function api_typeof(e){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},api_typeof(e)}function api_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function api_toPrimitive(e,t){if("object"!==api_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==api_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===api_typeof(i)?i:String(i)),o)}var n,i}function ProjectApi_typeof(e){return ProjectApi_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ProjectApi_typeof(e)}function ProjectApi_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function ProjectApi_toPrimitive(e,t){if("object"!==ProjectApi_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==ProjectApi_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===ProjectApi_typeof(i)?i:String(i)),o)}var n,i}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function _possibleConstructorReturn(e,t){if(t&&("object"===ProjectApi_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var o=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ProjectApi,e);var t=_createSuper(ProjectApi);function ProjectApi(e,r){var o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function ProjectApi_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ProjectApi),(o=t.call(this,r,n)).cdn=e,o}return function ProjectApi_createClass(e,t,r){return t&&ProjectApi_defineProperties(e.prototype,t),r&&ProjectApi_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ProjectApi,[{key:"getCardList",value:function getCardList(){var e=this;return this.get("/product").then((function(t){return t.items.map((function(t){return Object.assign(Object.assign({},t),{image:e.cdn+t.image})}))}))}},{key:"getCard",value:function getCard(e){var t=this;return this.get("/product/".concat(e)).then((function(e){return Object.assign(Object.assign({},e),{image:t.cdn+e.image})}))}},{key:"postOrder",value:function postOrder(e){return this.post("/order",e).then((function(e){return e}))}}]),ProjectApi}(function(){function Api(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=e,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(t=r.headers)&&void 0!==t?t:{})}}return function api_createClass(e,t,r){return t&&api_defineProperties(e.prototype,t),r&&api_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Api,[{key:"handleResponse",value:function handleResponse(e){return e.ok?e.json():e.json().then((function(t){var r;return Promise.reject(null!==(r=t.error)&&void 0!==r?r:e.statusText)}))}},{key:"get",value:function get(e){return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:r,body:JSON.stringify(t)})).then(this.handleResponse)}}]),Api}());function AppModel_typeof(e){return AppModel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AppModel_typeof(e)}function AppModel_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function AppModel_toPrimitive(e,t){if("object"!==AppModel_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==AppModel_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===AppModel_typeof(i)?i:String(i)),o)}var n,i}var n=function(){function AppModel(e,t){!function AppModel_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AppModel),this.cardCatalog=[],this.shoppingList=[],this.projectAPI=e,this.events=t,this.initialize()}return function AppModel_createClass(e,t,r){return t&&AppModel_defineProperties(e.prototype,t),r&&AppModel_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(AppModel,[{key:"initialize",value:function initialize(){var e=this;this.fetchCards().then((function(t){e.cardCatalog=t,e.events.emit("cards:fetched",t)})).catch((function(e){console.error("Failed to fetch cards:",e)})),this.getShoppingList()}},{key:"fetchCards",value:function fetchCards(){return this.projectAPI.getCardList()}},{key:"getShoppingList",value:function getShoppingList(){var e=localStorage.getItem("shoppingList");this.shoppingList=e?JSON.parse(e):[]}},{key:"addToShoppingList",value:function addToShoppingList(e){this.ifExists(e.id)||(this.shoppingList.push(e),localStorage.setItem("shoppingList",JSON.stringify(this.shoppingList)))}},{key:"ifExists",value:function ifExists(e){return this.shoppingList.some((function(t){return t.id===e}))}},{key:"removeFromShoppingList",value:function removeFromShoppingList(e){this.shoppingList=this.shoppingList.filter((function(t){return t.id!==e})),localStorage.setItem("shoppingList",JSON.stringify(this.shoppingList))}},{key:"clearShoppingList",value:function clearShoppingList(){this.shoppingList=[],localStorage.setItem("shoppingList",JSON.stringify(this.shoppingList))}},{key:"placeOrder",value:function placeOrder(e){return this.projectAPI.postOrder(e).then((function(e){return e}))}}]),AppModel}();function isSelector(e){return"string"==typeof e&&e.length>1}function ensureElement(e,t){if(isSelector(e)){var r=function ensureAllElements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(e))return Array.from(t.querySelectorAll(e));if(e instanceof NodeList)return Array.from(e);if(Array.isArray(e))return e;throw new Error("Unknown selector element")}(e,t);if(r.length>1&&console.warn("selector ".concat(e," return more then one element")),0===r.length)throw new Error("selector ".concat(e," return nothing"));return r.pop()}if(e instanceof HTMLElement)return e;throw new Error("Unknown selector element")}function cloneTemplate(e){return ensureElement(e).content.firstElementChild.cloneNode(!0)}function presenter_typeof(e){return presenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},presenter_typeof(e)}function presenter_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function presenter_toPrimitive(e,t){if("object"!==presenter_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==presenter_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===presenter_typeof(i)?i:String(i)),o)}var n,i}function presenter_createClass(e,t,r){return t&&presenter_defineProperties(e.prototype,t),r&&presenter_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var i=presenter_createClass((function Presenter(e,t,r,o,n,i){!function presenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Presenter),this._model=e,this._events=t,this._modal=r,this._view=o,this._view2=n,this._view3=i})),c={"софт-скил":"soft",другое:"other",кнопка:"button",дополнительное:"additional","хард-скил":"hard"};function component_typeof(e){return component_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},component_typeof(e)}function component_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function component_toPrimitive(e,t){if("object"!==component_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==component_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===component_typeof(i)?i:String(i)),o)}var n,i}var s=function(){function Component(e){!function component_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Component),this.container=e}return function component_createClass(e,t,r){return t&&component_defineProperties(e.prototype,t),r&&component_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Component,[{key:"toggleClass",value:function toggleClass(e,t,r){e.classList.toggle(t,r)}},{key:"setText",value:function setText(e,t){e&&(e.textContent=String(t))}},{key:"setDisabled",value:function setDisabled(e,t){e&&(t?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))}},{key:"setHidden",value:function setHidden(e){e.style.display="none"}},{key:"setVisible",value:function setVisible(e){e.style.removeProperty("display")}},{key:"setImage",value:function setImage(e,t,r){e&&(e.src=t,r&&(e.alt=r))}},{key:"render",value:function render(e){return Object.assign(this,null!=e?e:{}),this.container}}]),Component}();function card_typeof(e){return card_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},card_typeof(e)}function card_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function card_toPrimitive(e,t){if("object"!==card_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==card_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===card_typeof(i)?i:String(i)),o)}var n,i}function card_setPrototypeOf(e,t){return card_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},card_setPrototypeOf(e,t)}function card_createSuper(e){var t=function card_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=card_getPrototypeOf(e);if(t){var n=card_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function card_possibleConstructorReturn(e,t){if(t&&("object"===card_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function card_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function card_getPrototypeOf(e){return card_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},card_getPrototypeOf(e)}var a=function(e){!function card_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&card_setPrototypeOf(e,t)}(Card,e);var t=card_createSuper(Card);function Card(e,r,o){var n;return function card_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Card),(n=t.call(this,e)).card=r,n.events=o,n._titleElement=ensureElement(".card__title",n.container),n._imageElement=ensureElement(".card__image",n.container),n._categoryElement=ensureElement(".card__category",n.container),n._priceElement=ensureElement(".card__price",n.container),n}return function card_createClass(e,t,r){return t&&card_defineProperties(e.prototype,t),r&&card_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Card,[{key:"title",set:function set(e){this._titleElement.textContent=e}},{key:"image",set:function set(e){this._imageElement.src=e,this._imageElement.alt=this.card.title}},{key:"category",set:function set(e){this._categoryElement.textContent=e,this._categoryElement.classList.add("card__category_".concat(c[e]))}},{key:"price",set:function set(e){this._priceElement.textContent=e?"".concat(e," синапсов"):"бесценно"}}]),Card}(s);function cardView_typeof(e){return cardView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cardView_typeof(e)}function cardView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function cardView_toPrimitive(e,t){if("object"!==cardView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==cardView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===cardView_typeof(i)?i:String(i)),o)}var n,i}function cardView_setPrototypeOf(e,t){return cardView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},cardView_setPrototypeOf(e,t)}function cardView_createSuper(e){var t=function cardView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=cardView_getPrototypeOf(e);if(t){var n=cardView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function cardView_possibleConstructorReturn(e,t){if(t&&("object"===cardView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function cardView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cardView_getPrototypeOf(e){return cardView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},cardView_getPrototypeOf(e)}var u=function(e){!function cardView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cardView_setPrototypeOf(e,t)}(CardView,e);var t=cardView_createSuper(CardView);function CardView(e,r,o){var n;return function cardView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardView),(n=t.call(this,e,r,o)).container.addEventListener("click",(function(){n.events.emit("card:select",Object.assign({},n.card))})),n}return function cardView_createClass(e,t,r){return t&&cardView_defineProperties(e.prototype,t),r&&cardView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(CardView)}(a);function cardPreview_typeof(e){return cardPreview_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cardPreview_typeof(e)}function cardPreview_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function cardPreview_toPrimitive(e,t){if("object"!==cardPreview_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==cardPreview_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===cardPreview_typeof(i)?i:String(i)),o)}var n,i}function cardPreview_setPrototypeOf(e,t){return cardPreview_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},cardPreview_setPrototypeOf(e,t)}function cardPreview_createSuper(e){var t=function cardPreview_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=cardPreview_getPrototypeOf(e);if(t){var n=cardPreview_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function cardPreview_possibleConstructorReturn(e,t){if(t&&("object"===cardPreview_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function cardPreview_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cardPreview_getPrototypeOf(e){return cardPreview_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},cardPreview_getPrototypeOf(e)}var f=function(e){!function cardPreview_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cardPreview_setPrototypeOf(e,t)}(CardPreview,e);var t=cardPreview_createSuper(CardPreview);function CardPreview(e,r,o){var n;return function cardPreview_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardPreview),(n=t.call(this,e,r,o)).descriptionElement=ensureElement(".card__text",n.container),n.buttonElement=ensureElement(".card__button",n.container),n.buttonElement.addEventListener("click",(function(){var e={id:r.id,title:r.title,price:r.price};"Убрать из корзины"===n.buttonElement.textContent?(n.buttonElement.textContent="В корзину",n.events.emit("card:remove",Object.assign({},e))):(n.buttonElement.textContent="Убрать из корзины",n.events.emit("card:add",Object.assign({},e)))})),n.card.price||n.buttonElement.setAttribute("disabled",""),n}return function cardPreview_createClass(e,t,r){return t&&cardPreview_defineProperties(e.prototype,t),r&&cardPreview_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(CardPreview,[{key:"button",set:function set(e){this.buttonElement.textContent=e}},{key:"description",set:function set(e){this.descriptionElement.textContent=e}}]),CardPreview}(a);function cardPresenter_typeof(e){return cardPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cardPresenter_typeof(e)}function cardPresenter_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function cardPresenter_toPrimitive(e,t){if("object"!==cardPresenter_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==cardPresenter_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===cardPresenter_typeof(i)?i:String(i)),o)}var n,i}function cardPresenter_setPrototypeOf(e,t){return cardPresenter_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},cardPresenter_setPrototypeOf(e,t)}function cardPresenter_createSuper(e){var t=function cardPresenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=cardPresenter_getPrototypeOf(e);if(t){var n=cardPresenter_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function cardPresenter_possibleConstructorReturn(e,t){if(t&&("object"===cardPresenter_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function cardPresenter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cardPresenter_getPrototypeOf(e){return cardPresenter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},cardPresenter_getPrototypeOf(e)}var p=ensureElement(".gallery"),l=ensureElement("#card-catalog"),y=ensureElement("#card-preview"),d=function(e){!function cardPresenter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cardPresenter_setPrototypeOf(e,t)}(CardPresenter,e);var t=cardPresenter_createSuper(CardPresenter);function CardPresenter(e,r,o){return function cardPresenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardPresenter),t.call(this,e,r,o)}return function cardPresenter_createClass(e,t,r){return t&&cardPresenter_defineProperties(e.prototype,t),r&&cardPresenter_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(CardPresenter,[{key:"loadCards",value:function loadCards(){var e=this;this._model.cardCatalog.forEach((function(t){var r=cloneTemplate(l),o=new u(r,t,e._events);p.append(o.render(t))}))}},{key:"handleOpenModal",value:function handleOpenModal(e){var t=this._model.ifExists(e.id),r=new f(cloneTemplate(y),e,this._events);t&&(r.button="Убрать из корзины"),this._modal.render({content:r.render(e)})}}]),CardPresenter}(i);function modal_typeof(e){return modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},modal_typeof(e)}function modal_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function modal_toPrimitive(e,t){if("object"!==modal_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==modal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===modal_typeof(i)?i:String(i)),o)}var n,i}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(e,t,r){var o=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=modal_getPrototypeOf(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},_get.apply(this,arguments)}function modal_setPrototypeOf(e,t){return modal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},modal_setPrototypeOf(e,t)}function modal_createSuper(e){var t=function modal_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=modal_getPrototypeOf(e);if(t){var n=modal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function modal_possibleConstructorReturn(e,t){if(t&&("object"===modal_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return modal_assertThisInitialized(e)}(this,r)}}function modal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function modal_getPrototypeOf(e){return modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},modal_getPrototypeOf(e)}var m=function(e){!function modal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&modal_setPrototypeOf(e,t)}(Modal,e);var t=modal_createSuper(Modal);function Modal(e,r){var o;return function modal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Modal),(o=t.call(this,e)).events=r,o._closeButton=ensureElement(".modal__close",e),o._content=ensureElement(".modal__content",e),o._closeButton.addEventListener("click",o.close.bind(modal_assertThisInitialized(o))),o.container.addEventListener("click",o.close.bind(modal_assertThisInitialized(o))),o._content.addEventListener("click",(function(e){return e.stopPropagation()})),o}return function modal_createClass(e,t,r){return t&&modal_defineProperties(e.prototype,t),r&&modal_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Modal,[{key:"content",set:function set(e){this._content.replaceChildren(e)}},{key:"open",value:function open(){this.container.classList.add("modal_active"),this.events.emit("modal:open")}},{key:"close",value:function close(){this.container.classList.remove("modal_active"),this.content=null,this.events.emit("modal:close")}},{key:"render",value:function render(e){return _get(modal_getPrototypeOf(Modal.prototype),"render",this).call(this,e),this.open(),this.container}}]),Modal}(s);function shoppingListItemView_typeof(e){return shoppingListItemView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},shoppingListItemView_typeof(e)}function shoppingListItemView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function shoppingListItemView_toPrimitive(e,t){if("object"!==shoppingListItemView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==shoppingListItemView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===shoppingListItemView_typeof(i)?i:String(i)),o)}var n,i}function shoppingListItemView_setPrototypeOf(e,t){return shoppingListItemView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},shoppingListItemView_setPrototypeOf(e,t)}function shoppingListItemView_createSuper(e){var t=function shoppingListItemView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=shoppingListItemView_getPrototypeOf(e);if(t){var n=shoppingListItemView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function shoppingListItemView_possibleConstructorReturn(e,t){if(t&&("object"===shoppingListItemView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function shoppingListItemView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function shoppingListItemView_getPrototypeOf(e){return shoppingListItemView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},shoppingListItemView_getPrototypeOf(e)}var _=function(e){!function shoppingListItemView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&shoppingListItemView_setPrototypeOf(e,t)}(ShoppingListItemView,e);var t=shoppingListItemView_createSuper(ShoppingListItemView);function ShoppingListItemView(e,r,o){var n;return function shoppingListItemView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ShoppingListItemView),(n=t.call(this,e)).events=r,n.indexElement=ensureElement(".basket__item-index",n.container),n.titleElement=ensureElement(".card__title",n.container),n.priceElement=ensureElement(".card__price",n.container),n.buttonElement=ensureElement(".basket__item-delete",n.container),n.buttonElement.addEventListener("click",(function(){r.emit("card:remove",Object.assign({},o))})),n}return function shoppingListItemView_createClass(e,t,r){return t&&shoppingListItemView_defineProperties(e.prototype,t),r&&shoppingListItemView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ShoppingListItemView,[{key:"title",set:function set(e){this.titleElement.textContent=e}},{key:"index",set:function set(e){this.indexElement.textContent=e.toString()}},{key:"price",set:function set(e){this.priceElement.textContent=e?e.toString()+" синапсов":"бесценно"}}]),ShoppingListItemView}(s);function shoppingListView_typeof(e){return shoppingListView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},shoppingListView_typeof(e)}function shoppingListView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function shoppingListView_toPrimitive(e,t){if("object"!==shoppingListView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==shoppingListView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===shoppingListView_typeof(i)?i:String(i)),o)}var n,i}function shoppingListView_setPrototypeOf(e,t){return shoppingListView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},shoppingListView_setPrototypeOf(e,t)}function shoppingListView_createSuper(e){var t=function shoppingListView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=shoppingListView_getPrototypeOf(e);if(t){var n=shoppingListView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function shoppingListView_possibleConstructorReturn(e,t){if(t&&("object"===shoppingListView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function shoppingListView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function shoppingListView_getPrototypeOf(e){return shoppingListView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},shoppingListView_getPrototypeOf(e)}var h=ensureElement("#card-basket"),b=function(e){!function shoppingListView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&shoppingListView_setPrototypeOf(e,t)}(ShoppingListView,e);var t=shoppingListView_createSuper(ShoppingListView);function ShoppingListView(e,r){var o;return function shoppingListView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ShoppingListView),(o=t.call(this,e)).events=r,o.listElement=ensureElement(".basket__list",o.container),o.totalSumElement=ensureElement(".basket__price",o.container),o.buttonElement=ensureElement(".basket__button",o.container),o.counterElement=ensureElement(".header__basket-counter"),o.buttonElement.addEventListener("click",(function(){r.emit("order:start")})),o}return function shoppingListView_createClass(e,t,r){return t&&shoppingListView_defineProperties(e.prototype,t),r&&shoppingListView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ShoppingListView,[{key:"updateView",value:function updateView(e){var t=this;this.listElement.innerHTML=null,0===e.length?this.toggleButton(!0):(this.toggleButton(!1),e.forEach((function(e,r){var o=new _(cloneTemplate(h),t.events,e);o.index=r+1,t.listElement.appendChild(o.render(e))}))),this.updateTotalSum(e),this.counterElement.textContent=e.length.toString()}},{key:"updateTotalSum",value:function updateTotalSum(e){for(var t=0,r=0;r<e.length;r++)e[r].price&&(t+=e[r].price);this.totalSumElement.textContent="".concat(t.toString()," синапсов")}},{key:"toggleButton",value:function toggleButton(e){e?this.buttonElement.setAttribute("disabled",""):this.buttonElement.removeAttribute("disabled")}}]),ShoppingListView}(s);function shoppingListPresenter_typeof(e){return shoppingListPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},shoppingListPresenter_typeof(e)}function shoppingListPresenter_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function shoppingListPresenter_toPrimitive(e,t){if("object"!==shoppingListPresenter_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==shoppingListPresenter_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===shoppingListPresenter_typeof(i)?i:String(i)),o)}var n,i}function shoppingListPresenter_setPrototypeOf(e,t){return shoppingListPresenter_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},shoppingListPresenter_setPrototypeOf(e,t)}function shoppingListPresenter_createSuper(e){var t=function shoppingListPresenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=shoppingListPresenter_getPrototypeOf(e);if(t){var n=shoppingListPresenter_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function shoppingListPresenter_possibleConstructorReturn(e,t){if(t&&("object"===shoppingListPresenter_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function shoppingListPresenter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function shoppingListPresenter_getPrototypeOf(e){return shoppingListPresenter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},shoppingListPresenter_getPrototypeOf(e)}var v=function(e){!function shoppingListPresenter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&shoppingListPresenter_setPrototypeOf(e,t)}(ShoppingListPresenter,e);var t=shoppingListPresenter_createSuper(ShoppingListPresenter);function ShoppingListPresenter(e,r,o,n){var i;return function shoppingListPresenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ShoppingListPresenter),(i=t.call(this,e,r,o,n)).handleUpdateView(),i}return function shoppingListPresenter_createClass(e,t,r){return t&&shoppingListPresenter_defineProperties(e.prototype,t),r&&shoppingListPresenter_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ShoppingListPresenter,[{key:"handleAddToShoppingList",value:function handleAddToShoppingList(e){this._model.addToShoppingList(e),this.handleUpdateView()}},{key:"handleRemoveFromShoppingList",value:function handleRemoveFromShoppingList(e){this._model.removeFromShoppingList(e),this.handleUpdateView()}},{key:"handleOpenModal",value:function handleOpenModal(){this._modal.render({content:this._view.render()})}},{key:"handleUpdateView",value:function handleUpdateView(){this._view.updateView(this._model.shoppingList)}}]),ShoppingListPresenter}(i);function orderPresenter_typeof(e){return orderPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},orderPresenter_typeof(e)}function orderPresenter_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function orderPresenter_toPrimitive(e,t){if("object"!==orderPresenter_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==orderPresenter_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===orderPresenter_typeof(i)?i:String(i)),o)}var n,i}function orderPresenter_setPrototypeOf(e,t){return orderPresenter_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},orderPresenter_setPrototypeOf(e,t)}function orderPresenter_createSuper(e){var t=function orderPresenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=orderPresenter_getPrototypeOf(e);if(t){var n=orderPresenter_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function orderPresenter_possibleConstructorReturn(e,t){if(t&&("object"===orderPresenter_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function orderPresenter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function orderPresenter_getPrototypeOf(e){return orderPresenter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},orderPresenter_getPrototypeOf(e)}var P=function(e){!function orderPresenter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&orderPresenter_setPrototypeOf(e,t)}(OrderPresenter,e);var t=orderPresenter_createSuper(OrderPresenter);function OrderPresenter(e,r,o,n,i,c){var s;return function orderPresenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderPresenter),(s=t.call(this,e,r,o,n,i,c)).formErrors={},s}return function orderPresenter_createClass(e,t,r){return t&&orderPresenter_defineProperties(e.prototype,t),r&&orderPresenter_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(OrderPresenter,[{key:"handleOpenOrderForm",value:function handleOpenOrderForm(){this.orderDetails={payment:"card",address:"",email:"",phone:"",total:this._model.shoppingList.reduce((function(e,t){return e+t.price}),0),items:this._model.shoppingList.map((function(e){return e.id}))},this._modal.render({content:this._view.render({address:"",payment:"card",valid:!1,errors:[]})})}},{key:"handleOpenContactsForm",value:function handleOpenContactsForm(){this._modal.render({content:this._view2.render({email:"",phone:"",valid:!1,errors:[]})})}},{key:"handleChangeInput",value:function handleChangeInput(e,t){"string"==typeof t&&(this.orderDetails[e]=t),this.validateOrder()}},{key:"validateOrder",value:function validateOrder(){var e={};return this.orderDetails.email||(e.email="Необходимо указать email"),this.orderDetails.phone||(e.phone="Необходимо указать телефон"),this.orderDetails.address||(e.address="Необходимо указать адрес"),this.orderDetails.payment||(e.payment="Необходимо указать способ оплаты"),this.formErrors=e,this._events.emit("formErrors:change",this.formErrors),0===Object.keys(e).length}},{key:"handleErrors",value:function handleErrors(e){var t=e.email,r=e.phone,o=e.payment,n=e.address;this._view.valid=!n,this._view2.valid=!t&&!r,this._view.errors=Object.values({address:n,payment:o}),this._view2.errors=Object.values({email:t,phone:r})}},{key:"handleSendOrderDetails",value:function handleSendOrderDetails(){var e=this;this._model.placeOrder(this.orderDetails).then((function(t){e._events.emit("form:submit",{data:t}),e._modal.render({content:e._view3.render(Object.assign({},t))})})),this.handleClearShoppingList()}},{key:"handleClearShoppingList",value:function handleClearShoppingList(){this._model.clearShoppingList(),this.orderDetails={payment:"card",address:"",email:"",phone:"",total:0,items:[]}}}]),OrderPresenter}(i);function form_typeof(e){return form_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},form_typeof(e)}function form_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function form_toPrimitive(e,t){if("object"!==form_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==form_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===form_typeof(i)?i:String(i)),o)}var n,i}function form_get(){return form_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(e,t,r){var o=function form_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=form_getPrototypeOf(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},form_get.apply(this,arguments)}function form_setPrototypeOf(e,t){return form_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},form_setPrototypeOf(e,t)}function form_createSuper(e){var t=function form_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=form_getPrototypeOf(e);if(t){var n=form_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function form_possibleConstructorReturn(e,t){if(t&&("object"===form_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function form_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function form_getPrototypeOf(e){return form_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},form_getPrototypeOf(e)}var __rest=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r},g=function(e){!function form_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&form_setPrototypeOf(e,t)}(Form,e);var t=form_createSuper(Form);function Form(e,r){var o;return function form_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Form),(o=t.call(this,e)).container=e,o.events=r,o._submit=ensureElement("button[type=submit]",o.container),o._errors=ensureElement(".form__errors",o.container),o.container.addEventListener("input",(function(e){var t=e.target,r=t.name,n=t.value;o.onInputChange(r,n)})),o.container.addEventListener("submit",(function(e){e.preventDefault(),o.events.emit("".concat(o.container.name,":submit"))})),o}return function form_createClass(e,t,r){return t&&form_defineProperties(e.prototype,t),r&&form_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Form,[{key:"onInputChange",value:function onInputChange(e,t){this.events.emit("".concat(this.container.name,".").concat(String(e),":change"),{field:e,value:t})}},{key:"valid",set:function set(e){this._submit.disabled=!e}},{key:"errors",set:function set(e){var t=e.filter((function(e){return!!e})).join("; ");this.setText(this._errors,t)}},{key:"render",value:function render(e){var t=e.valid,r=e.errors,o=__rest(e,["valid","errors"]);return form_get(form_getPrototypeOf(Form.prototype),"render",this).call(this,{valid:t,errors:r}),Object.assign(this,o),this.container}}]),Form}(s);function orderForm_typeof(e){return orderForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},orderForm_typeof(e)}function orderForm_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function orderForm_toPrimitive(e,t){if("object"!==orderForm_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==orderForm_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===orderForm_typeof(i)?i:String(i)),o)}var n,i}function orderForm_setPrototypeOf(e,t){return orderForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},orderForm_setPrototypeOf(e,t)}function orderForm_createSuper(e){var t=function orderForm_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=orderForm_getPrototypeOf(e);if(t){var n=orderForm_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function orderForm_possibleConstructorReturn(e,t){if(t&&("object"===orderForm_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function orderForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function orderForm_getPrototypeOf(e){return orderForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},orderForm_getPrototypeOf(e)}var O=function(e){!function orderForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&orderForm_setPrototypeOf(e,t)}(OrderForm,e);var t=orderForm_createSuper(OrderForm);function OrderForm(e,r){var o;return function orderForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderForm),(o=t.call(this,e,r)).buttonElements=Array.from(o.container.querySelectorAll(".button_alt")),o.buttonElements.forEach((function(e){e.addEventListener("click",(function(e){return o.handlePaymentChange(e)}))})),o}return function orderForm_createClass(e,t,r){return t&&orderForm_defineProperties(e.prototype,t),r&&orderForm_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(OrderForm,[{key:"address",set:function set(e){this.container.elements.namedItem("address").value=e}},{key:"payment",set:function set(e){this.buttonElements.forEach((function(e){e.classList.remove("button_alt-active")})),this.container.elements.namedItem("".concat(e)).classList.add("button_alt-active")}},{key:"handlePaymentChange",value:function handlePaymentChange(e){var t=e.target;this.buttonElements.forEach((function(e){e.classList.toggle("button_alt-active")})),this.events.emit("order.payment:change",{field:"payment",value:t.name})}}]),OrderForm}(g);function contactsForm_typeof(e){return contactsForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},contactsForm_typeof(e)}function contactsForm_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function contactsForm_toPrimitive(e,t){if("object"!==contactsForm_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==contactsForm_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===contactsForm_typeof(i)?i:String(i)),o)}var n,i}function contactsForm_setPrototypeOf(e,t){return contactsForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},contactsForm_setPrototypeOf(e,t)}function contactsForm_createSuper(e){var t=function contactsForm_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=contactsForm_getPrototypeOf(e);if(t){var n=contactsForm_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function contactsForm_possibleConstructorReturn(e,t){if(t&&("object"===contactsForm_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function contactsForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function contactsForm_getPrototypeOf(e){return contactsForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},contactsForm_getPrototypeOf(e)}var w=function(e){!function contactsForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&contactsForm_setPrototypeOf(e,t)}(ContactsForm,e);var t=contactsForm_createSuper(ContactsForm);function ContactsForm(e,r){return function contactsForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ContactsForm),t.call(this,e,r)}return function contactsForm_createClass(e,t,r){return t&&contactsForm_defineProperties(e.prototype,t),r&&contactsForm_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ContactsForm,[{key:"phone",set:function set(e){this.container.elements.namedItem("phone").value=e}},{key:"email",set:function set(e){this.container.elements.namedItem("email").value=e}}]),ContactsForm}(g);function successModal_typeof(e){return successModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},successModal_typeof(e)}function successModal_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,i=void 0,i=function successModal_toPrimitive(e,t){if("object"!==successModal_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==successModal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===successModal_typeof(i)?i:String(i)),o)}var n,i}function successModal_setPrototypeOf(e,t){return successModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},successModal_setPrototypeOf(e,t)}function successModal_createSuper(e){var t=function successModal_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=successModal_getPrototypeOf(e);if(t){var n=successModal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function successModal_possibleConstructorReturn(e,t){if(t&&("object"===successModal_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function successModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function successModal_getPrototypeOf(e){return successModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},successModal_getPrototypeOf(e)}var S=function(e){!function successModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&successModal_setPrototypeOf(e,t)}(SuccessModal,e);var t=successModal_createSuper(SuccessModal);function SuccessModal(e,r){var o;return function successModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SuccessModal),(o=t.call(this,e)).events=r,o.descriptionElement=ensureElement(".order-success__description",o.container),o.buttonElement=ensureElement(".order-success__close",o.container),o.buttonElement.addEventListener("click",(function(){o.events.emit("order:done")})),o}return function successModal_createClass(e,t,r){return t&&successModal_defineProperties(e.prototype,t),r&&successModal_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(SuccessModal,[{key:"total",set:function set(e){this.descriptionElement.textContent="Списано: ".concat(e," синапсов")}}]),SuccessModal}(s);console.log(t,r);var j=ensureElement("#basket"),E=ensureElement("#order"),C=ensureElement("#contacts"),L=ensureElement("#success"),k=ensureElement("#modal-container"),R=ensureElement(".page__wrapper"),V=ensureElement(".header__basket"),T=new e,F=new n(new o(r,t),T),I=new m(k,T),M=new b(cloneTemplate(j),T),A=new O(cloneTemplate(E),T),x=new w(cloneTemplate(C),T),N=new S(cloneTemplate(L),T),B=new d(F,T,I),D=new v(F,T,I,M),z=new P(F,T,I,A,x,N);T.on("cards:fetched",(function(){B.loadCards()})),T.on("card:select",(function(e){B.handleOpenModal(e)})),T.on("card:add",(function(e){D.handleAddToShoppingList(e)})),T.on("card:remove",(function(e){D.handleRemoveFromShoppingList(e.id)})),T.on("modal:open",(function(){R.classList.add("page__wrapper_locked")})),T.on("modal:close",(function(){R.classList.remove("page__wrapper_locked")})),V.addEventListener("click",(function(){D.handleOpenModal()})),T.on("order:start",(function(){z.handleOpenOrderForm()})),T.on("order:submit",(function(){z.handleOpenContactsForm()})),T.on("contacts:submit",(function(){z.handleSendOrderDetails(),D.handleUpdateView()})),T.on(/^(order|contacts)\..*:change$/,(function(e){z.handleChangeInput(e.field,e.value)})),T.on("formErrors:change",(function(e){z.handleErrors(e)})),T.on("order:done",(function(){I.close()}))})();
//# sourceMappingURL=main.js.map